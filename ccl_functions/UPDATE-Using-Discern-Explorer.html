
<!DOCTYPE html>

<html lang="en-US">
<head>
<!-- Start SiteCatalyst code --><!-- End SiteCatalyst code -->


<title>UPDATE Using Discern Explorer - Discern Help Pages - Cerner Wiki</title>






























<style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>



</head>
<body class="theme-default aui-layout aui-theme-default" id="com-atlassian-confluence">
<div id="stp-licenseStatus-banner"></div>
<div id="workflow-page-status" style="display: none;"><fieldset class="hidden parameters">
<input id="stateName" type="hidden" value="Published"/><input id="hoverDescription" type="hidden" value="Published"/><input id="finalState" type="hidden" value="true"/><input id="hasFinalState" type="hidden" value="true"/><input id="publishedView" type="hidden" value="true"/><input id="taskable" type="hidden" value="false"/><input id="activeTasks" type="hidden" value="0"/><input id="pageAssignable" type="hidden" value="false"/><input id="workflowAdmin" type="hidden" value="false"/><input id="anonymous" type="hidden" value="true"/><input id="alternateViewStateName" type="hidden" value="View"/><input id="alternateViewUrl" type="hidden" value="/display/1101discernHP/UPDATE+Using+Discern+Explorer?draft=true"/><input id="activityVisible" type="hidden" value="true"/><input id="approvalMinQuery" type="hidden" value="5"/><input id="showDocumentActivity" type="hidden" value="true"/><input id="alternateViewTitle" type="hidden" value="View latest version of page"/></fieldset></div>
<div style="display: none;"></div>









































<!-- CTSSOL-29742: Add Page To Book -->


<div id="page">
<div id="full-height-container">


<div class="ia-splitter">

<!-- \#header -->
<main class="aui-page-panel" id="main" role="main">
<!-- \#main-header -->
<div id="sidebar-container">
</div><!-- \#sidebar-container -->


<div class="page view" id="content">
<div id="action-messages">
</div>





<div class="wiki-content" id="main-content">
<div class="wiki-content">
<p><span style="letter-spacing: 0.0px;">The UPDATE command updates existing rows in a table. Only authorized </span><span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span><span style="letter-spacing: 0.0px;"> personnel should use the UPDATE command on </span><span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span><span style="letter-spacing: 0.0px;"> production tables.</span></p><p>Your RDBMS sign-on controls which RDBMS tables you can update. To UPDATE rows on a non-RDBMS table, you must issue a DEFINE command with the MODIFY option to allow updates to the file; otherwise, the file is opened as read-only.</p><p>The SET clause is required when using the UPDATE command. The SET clause identifies the columns to be changed in a row and defines the information to be substituted in those columns. Use the WHERE clause to qualify which records should be changed. To update all records, use the wild-card option as part of your qualification or add <strong>seq = 1</strong>.</p><p>Use the PLAN/JOIN clauses to control the path of the joins between one or more non-RDBMS tables. Generally a non-RDBMS table is created using the Select Into Table command. When updating aÂ Relational Database Management System (RDBMS) table, you can PLAN on the DUMMYT table and JOIN to the RDBMS table to update values on the RDBMS table with values from a record structure. When updating an RDBMS table, you can PLAN on a non-RDBMS table and JOIN to the RDBMS table to qualify specific rows on the RDBMS table for update. Values from the non-RDBMS table can be used in the SET clause to replace the values on the RDBMS table. Only a single RDBMS table can be referenced in the UPDATE command. A nested SELECT statement that references additional RDBMS tables can be used in the SET clause or the WHERE clause of the UPDATE command.</p><p>When updating an RDBMS table, the COMMIT command must be used after the UPDATE command to log the changes as permanent. Alternatively, the ROLLBACK command can be used to cancel or back out the changes to an RDBMS table. <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> scripts that perform updates should set the commit_ind field on the ReqInfo record structure to have the server commit or roll back the changes. Only authorized <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> personnel should use the UPDATE command on <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> production tables.</p><p>Before updating an RDBMS table, execute a SELECT that uses the control option FORUPDATE(range{,range}) to lock the rows that are to be updated.</p><p>Most <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> production tables contain several fields with names that begin with UPDT_. Generally these UPDT_* fields track who, what, and when created or last modified the table row. These UPDT_* fields are set when the row is inserted into the table. Usually, any subsequent updates to that row should reset these fields to maintain data integrity. In rare cases, the UPDT_* fields might be used for another purpose. Work with the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> team that owns the table to determine how the UPDT_* fields should be set when performing updates on <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> production tables. The following chart shows some of the common UPDT_* fields and general guidelines for setting them in an Update statement:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh" scope="row"><p>Field Name</p></th><th class="confluenceTh"><p>Description</p></th><th class="confluenceTh"><p>General Guideline for Setting</p></th></tr><tr><th class="confluenceTh" scope="row"><p>UPDT_ID</p></th><td class="confluenceTd"><p>Person_ID that inserted or updated the row</p></td><td class="confluenceTd"><p>Reqinfo-&gt;updt_id</p></td></tr><tr><th class="confluenceTh" scope="row"><p>UPDT_DT_TM</p></th><td class="confluenceTd"><p>Date and time the row was updated</p></td><td class="confluenceTd"><p>Cnvtdatetime(curdate,curtime3)</p></td></tr><tr><th class="confluenceTh" scope="row"><p>UPDT_CNT</p></th><td class="confluenceTd"><p>Number of times the row has been updated</p></td><td class="confluenceTd"><p>UPDT_CNT +1</p></td></tr><tr><th class="confluenceTh" scope="row"><p>UPDT_TASK</p></th><td class="confluenceTd"><p>Task that updated the row</p></td><td class="confluenceTd"><p>Reqinfo-&gt;updt_task</p></td></tr><tr><th class="confluenceTh" scope="row"><p>UPDT_APPLCTX</p></th><td class="confluenceTd"><p>Application context that updated the row</p></td><td class="confluenceTd"><p>Reqinfo-&gt;updt_applctx</p></td></tr></tbody></table></div><p>The preceding table is not an exhaustive list. Review the table definition of each table to determine what UPDT_* fields exist and work with the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> team that owns the table to determine how to set each field.</p><p>Only authorized <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> personnel should use the UPDATE command on <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> production tables.</p><h2 id="UPDATEUsingDiscernExplorer-Syntax">Syntax</h2><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre> UPDATE [FROM/INTO table_name [alias] {,table_name [alias]}]
    SET update_expression = expression {,update_expression = expression}
    [PLAN range [WHERE qualification]
    {join_operator range [WHERE qualification]}]
    [WHERE qualification]
    WITH update_option GO
</pre>
</div></div><h2 id="UPDATEUsingDiscernExplorer-Metasymbols">Metasymbols</h2><p><em>alias</em><br>The abbreviated name of a table to be used in place of the table name when referencing the table in any part of the DELETE, INSERT, RANGE, SELECT, and UPDATE commands.</br></p><p><em>expression</em><br/>An expression is the highest-level metasymbol among constants, field names, variables, and so on. The following expressions are valid:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>alias.field_name
array_name [dimension]
array_name [dimension1, dimension2]
array_name [dimension1, dimension2, dimension3]
constant
expression arithmetic_operator expression
-expression (expression)
function(expression{,expression})
parameter
record_name{-&gt;field_name}
table_name.field_name
variable
</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information conf-macro output-block" data-hasbody="true" data-macro-name="info"><p class="title conf-macro-render">Note</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Square brackets are part of the array_name syntax; they do not indicate an optional part of the syntax in this instance.</p></div></div><p><em>join_operator</em><br/>In the context of a PLAN clause, defines whether <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> performs a linear read between tables (JOIN), or performs a union of two tables (ORJOIN). Valid values are JOIN and ORJOIN.</p><p><em>qualification</em><br/>A condition that limits the number of records to be updated. Qualifications can include IF, IN, and CASE statements and can be combined using the qualifiers AND, OR, NOT, and BETWEEN. Relational operators are used to define the condition. The syntax for qualification is:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>(qualification)
NOT qualification
qualification AND qualification
qualification OR qualification
expression relational_operator expression
expression relational_operator subquery
</pre>
</div></div><p><em>table_name</em><br/>The name of the table from the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> Data Dictionary that you want to update, delete, or read.</p><p><em>update_expression</em><br/>The name of the table and field, as well as any substring of a field, to be searched for and updated in the records of a table. The syntax for valid update expressions is shown below.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>table_name.field_name SUBSTRING(start,length,table_name.field_name global_variable
</pre>
</div></div><p><em>update_option</em><br/>Valid actions you can take when issuing an UPDATE command. Valid UPDATE options are described below.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh" scope="row"><p>Option</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><th class="confluenceTh" scope="row"><p>CHECK</p></th><td class="confluenceTd"><p>Checks for invalid or unacceptable data and corrects it by setting the data in a character field to blank, setting the data in a numeric field to zero, or treating an invalid pack digit in a packed field as zero.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>CLEAR</p></th><td class="confluenceTd"><p>When a new record is written, the bytes in each field are initialized with the character defined using the CLEAR option. The syntax of this option is: WITH CLEAR = "[character]", where character can be any number, letter, or special character, or no character. To make a null field, set the CLEAR option to double quotes with no character between the quotes (""). The default clear character is a blank. Only applies to updates to non-RDBMS tables.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>COPY</p></th><td class="confluenceTd"><p>Copies a record, makes any changes to that record, and then writes a new record. Only applies to updates to non-RDBMS tables.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>[NO]COUNTER</p></th><td class="confluenceTd"><p>Displays the query counter (COUNTER) or does not display the query counter (NOCOUNTER). NOCOUNTER is the default.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>DONTCARE = range</p></th><td class="confluenceTd"><div class="content-wrapper"><p>If you are joining to another table and the table to which you are joining does not match on a record, <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> continues processing. The range is the name or alias of the table to which you are joining.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>DONTEXIST</p></th><td class="confluenceTd"><p>Performs the UPDATE only if you are joining to another table and a record does not exist on the table to which you are joining. Applies to the OUTERJOIN defined using the WITH OUTERJOIN option.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>EXPAND = 1/0</p></th><td class="confluenceTd"><p>Allows the EXPAND() function to pass an IN clause in the query to the RDBMS or use a global RDBMS temp table instead of the IN clause. <br class="atl-forced-newline"/>EXPAND = 0 is the default and creates an IN clause. <br class="atl-forced-newline"/>EXPAND = 1 inserts the values from the record member list to the global RDBMS temp table and then performs an implicit join to that temp table.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>MAXCOMMIT = commit_interval</p></th><td class="confluenceTd"><p>Only applies to array INSERT, UPDATE, or DELETE commands using the DUMMYT table to perform the implicit iteration. Otherwise is ignored. <br class="atl-forced-newline"/>Issues a commit at the specified commit_interval. Used in conjunction with theÂ  INSERT, UPDATE, or DELETE  commands. When the number of modified rows is equal to the commit_interval, the commit is performed. A final commit must be executed after the INSERT, UPDATE, or DELETEÂ  command that uses MAXCOMMIT, to commit the changes that are made between the MAXCOMMIT and the end of the INSERT, UPDATE, or DELETE . If theÂ  INSERT, UPDATE, or DELETE  is executed through a server, the final commit should be executed by the server using the reqinfo-&gt;commit_ind. Otherwise, the COMMIT command can be used for the final commit. When using MAXCOMMIT = commit_interval and RDBARRAYINSERT = array_size in the same INSERT, UPDATE, or DELETE command, the commit_interval should be greater than or equal to the array_size.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>MAXQUAL (table_name,integer)</p></th><td class="confluenceTd"><p>Limits the number of records to qualify per join on non-RDBMS tables.Â  For RDBMS tables, MAXQUAL is converted to a RowNum &lt;= <em>integer</em> qualification.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>MAXREAD (table_name,integer)</p></th><td class="confluenceTd"><p>Limits the number of records read per table and is used only when you are joining two or more tables. The table_name can be the name or alias of the table you are reading. The integer is the number of matches that represents the maximum number of physical records to be processed. This option is supported only on non-RDBMS tables.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>MAXREC = integer</p></th><td class="confluenceTd"><div class="content-wrapper"><p>Limits the number of records to be processed in the primary table, where integer is the number of matches that represents the maximum number of physical records to be processed. If a join is being used, the primary table is the first table read by <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span>. This option is supported only on non-RDBMS tables.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>OUTERJOIN = table_name</p></th><td class="confluenceTd"><p>Displays the records in table_name even if they are not present on tables to which you are joining. You also can use OUTERJOIN with the DONTEXIST option to create new records on the table to which you are joining when that table does not originally have a record to which you can join. The table_name can be the name or alias of the table that you want to read before going to the joined table.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>RDBARRAYINSERT= <em>array_size</em></p></th><td class="confluenceTd"><div class="content-wrapper"><p>Introduced in version 8.10.0 of <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span>. Controls the update method when using the DUMMYT table to update table rows using values from a record structure list. <br class="atl-forced-newline"/><br class="atl-forced-newline"/><em>array_size</em> <br class="atl-forced-newline"/>0: Don't use RDB array update method.Â  Instead update one row at a time. <br class="atl-forced-newline"/>1: Use RDB array update method with an array size matching the Set Trace RDBARRAYINSERT value. <br class="atl-forced-newline"/><em>num</em>: use RDB array update with an array size of <em>num</em>. An array size up to a maximum of 100 can be used for <em>num</em>. In <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.2 and higher, and array size of 50 is used if <em>num</em> is less than 50. <br class="atl-forced-newline"/><br class="atl-forced-newline"/>There is a limit of 2000 characters on each column that is updated using RDBARRAYINSERT. Attempting to use a value that is larger than 2000 characters in an update causes the value to be truncated to the first 2000 characters. <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.12.0 generates a warning if a column is truncated and warnings are enabled.</p><p>If the Update involves a BLOB/CLOB columnÂ the RDBARRAYINSERT reverts back to the single row operation.</p><p>Prior to <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.17.6 / 9.05.6, if the Update uses an IF expression in the Set clause, the RDBARRAYINSERT reverts back to the single row operation. Wrapping the IF expression in the Evaluate2() or replacing the IF with the Evaluate() function allows the RDBARRAYINSERT method to be used.</p><p>When using MAXCOMMIT = commit_interval and RDBARRAYINSERT = array_size in the same INSERT, UPDATE, or DELETE command, the commit_interval should be greater than or equal to the array_size.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>RDBRANGE</p></th><td class="confluenceTd"><div class="content-wrapper"><p>Use the FROM clause of the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> query instead of the PLAN/JOIN clause to determine the order of the FROM clause in the query that is sent to the RDBMS. Used in conjunction with the SELECT, UPDATE, INSERT, and DELETE commands.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>SKIPBEDROCK = 0/1</p></th><td class="confluenceTd"><div class="content-wrapper"><p>In a <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Bedrock</span> domain,Â SELECT, UPDATE, INSERT, and DELETE commands on tables that have the BR_CLIENT_ID column, implicitly add the BR_CLIENT_ID = CURCLIENTID qualification to the WHERE clause. SKIPBEDROCK = 0 is the default and uses the implicit qualification. SKIPBEDROCK = 1 disables the implicit qualification. RDB commands do not use this implicit qualification.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>SKIPLOGDOMAIN = 0/1</p></th><td class="confluenceTd"><div class="content-wrapper"><p>Introduced in version 8.8.0 of <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span>. In a logical client domain, Update commands on tables that have the LOGICAL_DOMAIN_ID column implicitly add the LOGICAL_DOMAIN_ID = CURLOGDOMAINID qualification to the Where clause. SKIPLOGDOMAIN = 0 is the default and uses the implicit qualification. SKIPLOGDOMAIN = 1 disables the implicit qualification. RDB commands do not use this implicit qualification.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>SKIPNETDOMAIN = 0/1</p></th><td class="confluenceTd"><div class="content-wrapper"><p><span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.8.0 obsoleted SKIPNETDOMAIN and replaced it with SKIPLOGDOMAIN. In a Network domain, SELECT, INSERT, UPDATE, and DELETE commands on tables that have the DOMAIN_NETWORK_ID, column implicitly add the DOMAIN_NETWORK_ID = CURNETDOMAINID qualification to the WHERE clause. SKIPNETDOMAIN = 0 is the default and uses the implicit qualification. SKIPNETDOMAIN = 1 disables the implicit qualification. RDB commands do not use this implicit qualification.</p></div></td></tr><tr><th class="confluenceTh" scope="row"><p>SIZE = integer</p></th><td class="confluenceTd"><p>Sets the length of the record to be written for variable length files or bar code labels; the integer is the length to which the record should be modified (the default size is the maximum record length). Only applies to updates on non-RDBMS tables.</p></td></tr><tr><th class="confluenceTh" scope="row"><p>STATUS( status_array_var <br class="atl-forced-newline"/>[,errnum_array_var <br class="atl-forced-newline"/>[,errmsg_array_var ]])</p></th><td class="confluenceTd"><p>Saves the status of the update into the record items when joining to a record structure list using the DUMMYT table.</p><p>By default, the status_item, defined as an integer, is set to 1 (success) or 0 (failure) for the updates. The errnum_item, defined as an integer, is set equal to the error number if the update generates an error. The errmsg_item, defined as character, is set equal to the error message if the update generates an error. Items are pulled from each position in the record structure and updated into the table. The status items are set on each position of the record structure.Â </p><p>When using RDBARRAYINSERT= array_size:</p><div class="table-wrap"><table class="wrapped confluenceTable" data-mce-resize="false"><tbody><tr><th class="confluenceTh">array_size</th><th class="confluenceTh">description</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">The update is performed and the status_item, errnum_item, and errmsg_item are set on each position of the Record Structure list. The status_item is set to 1 (success) or 0 (failure).</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">A block of records the size of the Set Trace RDBARRAYINSERT = array_size value are pulled from the Record Structure and updated into the table. The status items are set on each position of the Record Structure list that is a multiple of the Set Trace RDBARRAYINSERT = array_size value. The status_item is set to the number of rows that were updated. If the number of items in the Record Structure is not a multiple of the Set Trace RDBARRAYINSERT = array_size value, no status is set for the values from positions of the Record Structure that are greater than the last position of the Record Structure that is a multiple of the Set Trace RDBARRAYINSERT = array_size value.</td></tr><tr><td class="confluenceTd">num</td><td class="confluenceTd">A block of records the size of <em>num</em> are pulled from the Record Structure and updated into the table. The status items are set on each position of the Record Structure list that is a multiple of <em>num</em>. The status_item is set to the number of rows that were updated. If the number of items in the Record Structure is not a multiple of<em> num</em>, no status is set for the values from positions of the Record Structure that are greater than the last position of the Record Structure that is a multiple of <em>num</em>.</td></tr></tbody></table></div></td></tr><tr><th class="confluenceTh" scope="row"><p>[NO] TRIM</p></th><td class="confluenceTd"><p>Automatically trims trailing spaces on character string columns before sending to the RDBMS. Use NOTRIM to keep trailing spaces.</p></td></tr></tbody></table></div><h2 id="UPDATEUsingDiscernExplorer-Examples">Examples</h2><p>The following examples illustrate different ways to use UPDATE:</p><p>To update a row in TABLE_X:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>DEFINE TABLE_X IS "TABLE_X.DAT" WITH MODIFY

UPDATE INTO TABLE_X X
SET X.NAME="MURCER, BOBBY",
    X.TYPE="I"
WHERE X.NAME="MUCER, BOBBY"</pre>
</div></div><p>The following example updates the column, street1, in the ADDR table with the new home address. Because the name is not a column in the ADDR table, the qualification is made on the ROLODEX table by using a nested SELECT in the WHERE clause.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>UPDATE INTO ADDR A
SET A.STREET1 = "12345 N 12TH"
WHERE A.ROLODEX_ID IN (SELECT R.ROLODEX_ID
                       FROM ROLODEX R
                       WHERE R.NAME1 ="JONES"
                             AND R.NAME2 = "MARY")
      AND A.TYPE = "HOME"
</pre>
</div></div><p>The following example assumes:</p><ul><li>A custom RDBMS table named cust_person has been created.</li><li><p>A record structure named brec has been defined using the following:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>record brec (
     1 list[*]
       2 pid = f8
       2 birth_dt_tm = dq8 )
</pre>
</div></div></li><li>Before the update, a list of person ids, (PID) and birth dates has been placed in the brec record structure.</li></ul><p>The update command uses the DUMMYT table to get the pid from the record structure and update the row on the cust_person table that has that pid with the birth date from the same row in the record structure.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>UPDATE INTO CUST_PERSON P,
     (DUMMYT D WITH SEQ = VALUE(SIZE(BREC-&gt;LIST,5)))
SET P.BIRTH_DT_TM = CNVTDATETIME(BREC-&gt;LIST[D.SEQ].BIRTH_DT_TM)
    , P.UPDT_ID = REQINFO-&gt;UPDT_ID
    , P.UPDT_TASK = REQINFO-&gt;UPDT_TASK
    , P.UPDT_APPLCTX = REQINFO-&gt;UPDT_APPLCTX
    , P.UPDT_CNT = P.UPDT_CNT +1
PLAN D
JOIN P WHERE P.PERSON_ID = BREC-&gt;LIST[D.SEQ].PERSON_ID
WITH NOCOUNTER, RDBARRAYINSERT = 1
</pre>
</div></div><p>The following example assumes a custom RDBMS table named cust_person has been created and a custom non-RDBMS table named 1tmp_cust has been created. The example sets rows in the cust_person table using values from the 1tmp_cust table.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>UPDATE INTO CUST_PERSON P
     , 1TMP_CUST C
SET P.PERSON_ID= C.PERSON_ID
    , P.NOK_IND = 1
    , P.UPDT_DT_TM = CNVTDATETIME(CURDATE,CURTIME3)
    , P.NAME = CNVTUPPER(C.NAME)
PLAN C
JOIN P WHERE P.PERSON_ID = C.PERSON_ID
WITH NOCOUNTER
</pre>
</div></div><p>The following example updates the NAME and DT fields on the table named CUST_CCL_TABLE where the ID field is equal to 12345.0.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>UPDATE INTO CUST_CCL_TABLE
	SET NAME = "Smith, Jane"
	,DT = CNVTDATETIME(CURDATE,CURTIME3)
WHERE ID = 12345.0
WITH NOCOUNTER
</pre>
</div></div><p>The following example sets the DT field equal to the current date and time for rows on the CUST_CCL_TABLE that have an ID that matches a PERSON_ID on the PERSON table where the row on the PERSON table has been updated in the last two days.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>UPDATE INTO CUST_CCL_TABLE C
	SET C.DT = CNVTDATETIME(CURDATE,CURTIME3)
	WHERE C.ID =
		(SELECT	P.PERSON_ID
    	         FROM PERSON P
               	 WHERE P.UPDT_DT_TM &gt; CNVTDATETIME(CURDATE -2,0))
WITH NOCOUNTER
</pre>
</div></div><p>The following example updates the NAME field on the CUST_CCL_TABLE and sets the status, error_num, and error_msg items in the record structure:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>record rec(
    1 list[*]
        2 pid = f8
        2 name = vc
        2 status = i4
        2 error_num = i4
        2 error_msg = c132
        ) with protect

/* code to insert values into rec-&gt;list[ ].pid and rec-&gt;list[ ].name */

update into cust_bgr_table c
    ,(dummyt d with seq = size(rec-&gt;list,5))
    set c.name = rec-&gt;list[d.seq].name
plan d
join c where c.pid = rec-&gt;list[d.seq].pid
with RDBARRAYINSERT = 100,
    status(rec-&gt;list[d.seq].upd_status 
        ,rec-&gt;list[d.seq].upd_error_num 
        ,rec-&gt;list[d.seq].upd_error_msg )</pre>
</div></div>
</div>
</div>



</div>

</main><!-- \#main -->
</div>
</div>
</div><!-- \#full-height-container -->
<!-- \#page -->
<span id="confluence-server-performance" style="display:none;">{"serverDuration": 709, "requestCorrelationId": "cfd25a4499ebdf1b"}</span>
</body>
</html>
