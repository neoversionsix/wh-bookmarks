
<!DOCTYPE html>

<html lang="en-US">
<head>
<!-- Start SiteCatalyst code --><!-- End SiteCatalyst code -->


<title>DATETIMEADD Using Discern Explorer - Discern Help Pages - Cerner Wiki</title>






























<style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>



</head>
<body class="theme-default aui-layout aui-theme-default" id="com-atlassian-confluence">
<div id="stp-licenseStatus-banner"></div>
<div id="workflow-page-status" style="display: none;"><fieldset class="hidden parameters">
<input id="stateName" type="hidden" value="Published"/><input id="hoverDescription" type="hidden" value="Published"/><input id="finalState" type="hidden" value="true"/><input id="hasFinalState" type="hidden" value="true"/><input id="publishedView" type="hidden" value="true"/><input id="taskable" type="hidden" value="false"/><input id="activeTasks" type="hidden" value="0"/><input id="pageAssignable" type="hidden" value="false"/><input id="workflowAdmin" type="hidden" value="false"/><input id="anonymous" type="hidden" value="true"/><input id="alternateViewStateName" type="hidden" value="View"/><input id="alternateViewUrl" type="hidden" value="/display/1101discernHP/DATETIMEADD+Using+Discern+Explorer?draft=true"/><input id="activityVisible" type="hidden" value="true"/><input id="approvalMinQuery" type="hidden" value="5"/><input id="showDocumentActivity" type="hidden" value="true"/><input id="alternateViewTitle" type="hidden" value="View latest version of page"/></fieldset></div>
<div style="display: none;"></div>









































<!-- CTSSOL-29742: Add Page To Book -->


<div id="page">
<div id="full-height-container">


<div class="ia-splitter">

<!-- \#header -->
<main class="aui-page-panel" id="main" role="main">
<!-- \#main-header -->
<div id="sidebar-container">
</div><!-- \#sidebar-container -->


<div class="page view" id="content">
<div id="action-messages">
</div>






<div class="wiki-content" id="main-content">
<div class="wiki-content">
<p>The return of the DATETIMEADD() function is a DQ8 value. The interval is added to or subtracted from the datetime.</p><p>Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.1, the DATETIMEADD() function used a different interpretation of crossing daylight saving time than was used by the CNVTLOOKBEHIND() and CNVTLOOKAHEAD() functions. In <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.1, the DATETIMEADD() function was changed to use the same interpretation as the CNVTLOOKBEHIND() and CNVTLOOKAHEAD() functions.</p><p>See the DTTMCALC description in the SET TRACE topic for more information about flexing the behavior of the DATETIMEADD() function.</p><p>Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.15.0 and 9.03.0, using DATETIMEADD() on a Linux system to add less than 24 hours when UTC is in the 02:00 AM daylight saving time hour, could return an incorrect datetime value. The time could be off by one hour. This issue is resolved in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.15.0 and 9.03.0.</p><p>Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.15.5 and 9.03.5, DATETIMEADD() may return an incorrect date and time for calculations that cross the daylight time to standard time switch. This issue is resolved in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.15.5 and 9.03.5.</p><h2 id="DATETIMEADDUsingDiscernExplorer-Syntax">Syntax</h2><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>DATETIMEADD(datetime,interval[,mode])
</pre>
</div></div><h2 id="DATETIMEADDUsingDiscernExplorer-Metasymbols">Metasymbols</h2><p><em>datetime</em><br>A datetime value.</br></p><p>Beginning with <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.15.0 or 9.03.0, a variable that is declared as a DQ and assigned an Internal System Date can be used.</p><p><em>Interval</em><br/>A numerical value indicating the number of days to add to or subtract from the datetime.</p><p>Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 9.02.4, using an interval greater than 24850 or less than -24850 in 64bit Linux environments with SET TRACE DTTMCALC enabled may return an incorrect datetime value. This issue is resolved with <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 9.02.4 and later.</p><p><em>Mode</em></p><p>Mode was introduced in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.7.2.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Mode</th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>If a Coordinated Universal Time (UTC) datetime, then convert the datetime to local before applying the calculation.</p></td></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>If the UTC datetime and the addition is more than the DTTMCALCFLEX trace, use the UTC for the calculation; otherwise, use the local datetime for the calculation.</p></td></tr><tr><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>Same as Mode 1, but for the BSD extension.</p></td></tr></tbody></table></div><p>If mode is omitted, the default mode is flexed by the DTTMCALC trace. If DTTMCALC is disabled, Mode 0 is used. If DTTMCALC is enabled and the addition is more than the DTTMCALCFLEX trace, Mode 1 is used; otherwise, Mode 0 is used. By default, the DTTMCALCFLEX is 24 hours.</p><h2 id="DATETIMEADDUsingDiscernExplorer-Examples">Examples</h2><p>The following examples demonstrate the syntax. If the update date and time is December 2, 1998 10:10, D1 equals December 5, 1998 10:10, and D2 equals December 1, 1998 10:10.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>D1 = DATETIMEADD(P.UPDT_DT_TM, 3)
D2 = DATETIMEADD(P.UPDT_DT_TM, -1)
</pre>
</div></div><p>The following example uses the optional <em>mode</em> parameter. If the example is executed in an environment in the America/Chicago time zone, the Call Echo command returns <strong>09-MAR-2014 00:00:00.00</strong> in both UTC and non-UTC environments.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>;"09-Mar-2014 03:00:00" is 1 hour after DST began in the America/Chicago time zone
set start_dt_tm = cnvtdatetime("09-Mar-2014 03:00:00") go
;looking behind 3 hours will cross DST 
                       
set end_dt_tm_add = datetimeadd(start_dt_tm, -0.125,0) go  
call echo(format(end_dt_tm_add,";;q")) go
</pre>
</div></div><p>The following example uses the optional <em>mode</em> parameter. If the example is executed in an environment in the America/Chicago time zone, the Call Echo command returns <strong>08-MAR-2014 23:00:00.00</strong> in both UTC and non-UTC environments.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>;"09-Mar-2014 03:00:00" is 1 hour after DST began in the America/Chicago time zone
set start_dt_tm = cnvtdatetime("09-Mar-2014 03:00:00") go
;looking behind 3 hours will cross DST 
                       
set end_dt_tm_add = datetimeadd(start_dt_tm, -0.125,1) go  
call echo(format(end_dt_tm_add,";;q")) go
</pre>
</div></div><p>The following example uses the optional <em>mode</em> parameter. If the example is executed in an environment in the America/Chicago time zone, using <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.1 or later, the Call Echo command returns 08-MAR-2014 23:00:00.00 in UTC environments, and 09-MAR-2014 00:00:00.00 in non-UTC environments. Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.1, the Call Echo command returns <strong>09-MAR-2014 00:00:00.00</strong> in both UTC and non-UTC environments.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>;"09-Mar-2014 03:00:00" is 1 hour after DST began in the America/Chicago time zone
set start_dt_tm = cnvtdatetime("09-Mar-2014 03:00:00") go
;looking behind 3 hours will cross DST 
                       
set end_dt_tm_add = datetimeadd(start_dt_tm, -0.125,2) go  
call echo(format(end_dt_tm_add,";;q")) go
</pre>
</div></div><p>The following example requires <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.15.0, 9.03.0, or later:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>declare date_var = dq8 with protect go
set date_var = cnvtdate(3292019) go
call echo(format(datetimeadd(date_var,1),";;d")) go</pre>
</div></div><p><br/></p><pre><br/></pre><p><br/></p>
</div>
</div>



</div>

</main><!-- \#main -->
</div>
</div>
</div><!-- \#full-height-container -->
<!-- \#page -->
<span id="confluence-server-performance" style="display:none;">{"serverDuration": 694, "requestCorrelationId": "17edbacf7f640e31"}</span>
</body>
</html>
