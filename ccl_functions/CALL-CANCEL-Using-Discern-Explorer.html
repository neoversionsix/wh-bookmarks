
<!DOCTYPE html>

<html lang="en-US">
<head>
<!-- Start SiteCatalyst code --><!-- End SiteCatalyst code -->


<title>CALL CANCEL Using Discern Explorer - Discern Help Pages - Cerner Wiki</title>



























<style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>



</head>
<body class="theme-default aui-layout aui-theme-default" id="com-atlassian-confluence">
<div id="stp-licenseStatus-banner"></div>
<div id="workflow-page-status" style="display: none;"><fieldset class="hidden parameters">
<input id="stateName" type="hidden" value="Published"/><input id="hoverDescription" type="hidden" value="Published"/><input id="finalState" type="hidden" value="true"/><input id="hasFinalState" type="hidden" value="true"/><input id="publishedView" type="hidden" value="true"/><input id="taskable" type="hidden" value="false"/><input id="activeTasks" type="hidden" value="0"/><input id="pageAssignable" type="hidden" value="false"/><input id="workflowAdmin" type="hidden" value="false"/><input id="anonymous" type="hidden" value="true"/><input id="alternateViewStateName" type="hidden" value="View"/><input id="alternateViewUrl" type="hidden" value="/display/1101discernHP/CALL+CANCEL+Using+Discern+Explorer?draft=true"/><input id="activityVisible" type="hidden" value="true"/><input id="approvalMinQuery" type="hidden" value="5"/><input id="showDocumentActivity" type="hidden" value="true"/><input id="alternateViewTitle" type="hidden" value="View latest version of page"/></fieldset></div>
<div style="display: none;"></div>









































<!-- CTSSOL-29742: Add Page To Book -->


<div id="page">
<div id="full-height-container">


<div class="ia-splitter">

<!-- \#header -->
<main class="aui-page-panel" id="main" role="main">
<!-- \#main-header -->
<div id="sidebar-container">
</div><!-- \#sidebar-container -->


<div class="page view" id="content">
<div id="action-messages">
</div>





<div class="wiki-content" id="main-content">
<div class="wiki-content">
<p>The CALL CANCEL command is used to stop the processing of result rows in the reportwriter clauses of a <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> Select command. Call Cancel does not immediately break out of the reportwriter clauses. Instead it attempts to perform a controlled exit out of the reportwriter clauses. When selecting from an RDBMS table and using an IF command to conditionally issue CALL CANCEL, you must use an RDBMS condition.</p><h2 id="CALLCANCELUsingDiscernExplorer-Syntax">Syntax</h2><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>CALL CANCEL(cancel_mode)</pre>
</div></div><h2 id="CALLCANCELUsingDiscernExplorer-Metasymbols">Metasymbols</h2><p><em>cancel_mode</em></p><p>Determines the cancel mode to be used.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Value</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">Cancel processing of result rows.</td></tr></tbody></table></div><h2 id="CALLCANCELUsingDiscernExplorer-Examples">Examples</h2><p>The below example uses the CALL CANCEL( ) function in a Select that reads the RDBMS Person table. Since the example reads an RDBMS table, the IF command that conditionally issues CALL CANCEL(), requires an RDBMS condition. The example uses CALL CANCEL() to break out of the Detail section of the Select command when the Person_ID is equal to 5. If the Select command in the example returns the following:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh">Person_ID</th></tr><tr><td class="confluenceTd">1.0</td></tr><tr><td class="confluenceTd" colspan="1">1.0</td></tr><tr><td class="confluenceTd">2.0</td></tr><tr><td class="confluenceTd">2.0</td></tr><tr><td class="confluenceTd">3.0</td></tr><tr><td class="confluenceTd" colspan="1">3.0</td></tr><tr><td class="confluenceTd"><p>4.0</p></td></tr><tr><td class="confluenceTd" colspan="1">4.0</td></tr><tr><td class="confluenceTd" colspan="1">5.0</td></tr><tr><td class="confluenceTd" colspan="1">5.0</td></tr><tr><td class="confluenceTd" colspan="1">6.0</td></tr><tr><td class="confluenceTd" colspan="1">6.0</td></tr></tbody></table></div><p>The output of the example is:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>head report
head id           1.00
          detail           1.00 
          detail           1.00 
foot id           1.00          
head id           2.00          
          detail           2.00 
          detail           2.00 
foot id           2.00          
head id           3.00          
          detail           3.00 
          detail           3.00 
foot id           3.00          
head id           4.00          
          detail           4.00 
          detail           4.00 
foot id           4.00          
head id           5.00          
          detail           5.00 
foot id           5.00          
foot report                    

</pre>
</div></div><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>DROP PROGRAM CCL_TEST_CALL_CANCEL GO
CREATE PROGRAM CCL_TEST_CALL_CANCEL

prompt 
    "Output to File/Printer/MINE" = "MINE" 
with OUTDEV

declare pcnt = i4 with protect
select into $outdev
    p.person_id
from person_name p
order by 
    p.person_id
head report
    col 0 "head report"
    row +1
head p.person_id
    col 0 "head id" 
    col +1 p.person_id 
    row +1
    pcnt = 0
detail
    pcnt += 1
;;; if(pcnt = 5);this will not work call cancel requires RDBMS condition when selecting from an RDBMS table
    if(p.person_id = 5.0) ;this works because it is an RDBMS condition 
        call cancel(1)
    endif
    ;call cancel will display 1 detail row for person_id 5.0
    ;the foot p.person_id and foot report will then display
    col 10 "detail" 
    col +1 p.person_id
    row +1
foot p.person_id
    col 0 "foot id", col +1 p.person_id row +1
foot report
    col 0 "foot report"
    row +1
with format, separator = " "
END GO
</pre>
</div></div><p>The below example uses the CALL CANCEL( ) function in a Select that does not read any RDBMS tables. Since the example does not read any RDBMS tables, the IF command that conditionally issues CALL CANCEL(), can use any condition. </p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>SELECT INTO $outdev
    PLIST_PERSON_ID = REC-&gt;plist[D1.SEQ].person_id
    , PLIST_NAME_FULL_FORMATTED = REC-&gt;plist[D1.SEQ].name_full_formatted
    , OLIST_ORDER_ID = REC-&gt;plist[D1.SEQ].olist[D2.SEQ].order_id
    , OLIST_MNE = SUBSTRING(1, 30, REC-&gt;plist[D1.SEQ].olist[D2.SEQ].mne)

FROM
    (DUMMYT   D1  WITH SEQ = VALUE(SIZE(REC-&gt;plist, 5)))
    , (DUMMYT   D2  WITH SEQ = 1)

PLAN D1 WHERE MAXREC(D2, SIZE(REC-&gt;plist[D1.SEQ].olist, 5))
JOIN D2

ORDER BY
    PLIST_PERSON_ID
head report
    pcnt = 0
head plist_person_id
    ;count the people
    pcnt += 1
    ;if more than 5 people break out of the reportwriter sections
    ;call cancel finishes the current iteration
    ;so for the 6th person: 
    ;          the rest of this section is executed
    ;        , one detail section is executed
    ;        , the foot plist_person_id section is executed
    ;        , the foot report section is executed
    if(pcnt &gt; 5)
        call cancel(1)
    endif
    ocnt = 0
    col  0 "head person"
    col +1 PLIST_PERSON_ID
    col +1 PLIST_NAME_FULL_FORMATTED
    row +1
detail
    ;count the orders
    ocnt += 1
    ;print up to 3 orders per person
    if(ocnt &lt;= 3)
        col 20 OLIST_MNE
        row +1
    endif
foot plist_person_id
    col  0 "foot person"
    col +1 PLIST_PERSON_ID
    row +1  
foot report
    col 0 "foot report"
    row +1
WITH NOCOUNTER, SEPARATOR=" ", FORMAT

</pre>
</div></div><p><br/></p>
</div>
</div>



</div>

</main><!-- \#main -->
</div>
</div>
</div><!-- \#full-height-container -->
<!-- \#page -->
<span id="confluence-server-performance" style="display:none;">{"serverDuration": 616, "requestCorrelationId": "5c4bff6d7568efbd"}</span>
</body>
</html>
