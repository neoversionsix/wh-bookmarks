
<!DOCTYPE html>

<html lang="en-US">
<head>
<!-- Start SiteCatalyst code --><!-- End SiteCatalyst code -->


<title>DATETIMEZONEFORMAT Using Discern Explorer - Discern Help Pages - Cerner Wiki</title>



























<style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>



</head>
<body class="theme-default aui-layout aui-theme-default" id="com-atlassian-confluence">
<div id="stp-licenseStatus-banner"></div>
<div id="workflow-page-status" style="display: none;"><fieldset class="hidden parameters">
<input id="stateName" type="hidden" value="Published"/><input id="hoverDescription" type="hidden" value="Published"/><input id="finalState" type="hidden" value="true"/><input id="hasFinalState" type="hidden" value="true"/><input id="publishedView" type="hidden" value="true"/><input id="taskable" type="hidden" value="false"/><input id="activeTasks" type="hidden" value="0"/><input id="pageAssignable" type="hidden" value="false"/><input id="workflowAdmin" type="hidden" value="false"/><input id="anonymous" type="hidden" value="true"/><input id="alternateViewStateName" type="hidden" value="View"/><input id="alternateViewUrl" type="hidden" value="/display/1101discernHP/DATETIMEZONEFORMAT+Using+Discern+Explorer?draft=true"/><input id="activityVisible" type="hidden" value="true"/><input id="approvalMinQuery" type="hidden" value="5"/><input id="showDocumentActivity" type="hidden" value="true"/><input id="alternateViewTitle" type="hidden" value="View latest version of page"/></fieldset></div>
<div style="display: none;"></div><fieldset class="parameters hidden">
<input id="isWorkflowsLiteApp" type="hidden" value="false"/>
<input id="isWorkflowsApp" type="hidden" value="true"/>
<input id="parametersLabel" type="hidden" value="Parameters"/>
<input id="hasWorkflow" type="hidden" value="true"/>
<input id="isPageReadAck" type="hidden" value="false"/>
<input id="cwConfluenceLocale" type="hidden" value="en"/>
<input id="pluginKey" type="hidden" value="com.comalatech.workflow"/>
<input id="cwConfluenceTimeFormat" type="hidden" value="h:mm a"/>
<input id="isComalaAppLicensed" type="hidden" value="true"/>
<input id="cwIsSpaceAdmin" type="hidden" value="false"/>
<input id="cwIsConfluenceAdmin" type="hidden" value="false"/>
<input id="hasReadAck" type="hidden" value="false"/>
<input id="cwSpaceWorkflowAllowed" type="hidden" value="true"/>
<input id="cwConfluenceDateTimeFormat" type="hidden" value="MMM dd, yyyy HH:mm"/>
<input id="tasksLabel" type="hidden" value="Tasks"/>
<input id="approvalsLabel" type="hidden" value="Approvals"/>
<input id="cwConfluenceDateFormat" type="hidden" value="MMM dd, yyyy"/>
<input id="statesLabel" type="hidden" value="State"/>
<input id="workflowVersion" type="hidden" value="7.3.0"/>
<input id="cwShowWorkflowTranslator" type="hidden" value="true"/>
<input id="isApprovalsApp" type="hidden" value="false"/>
</fieldset>
































<fieldset class="parameters hidden">
<input id="showPageOnboarding" type="hidden" value="false"/>
</fieldset>

<fieldset class="parameters hidden">
<input id="dbChromeHeader" type="hidden" value="Book Builder"/>
<input id="dbChromeBack" type="hidden" value="Back"/>
<input id="dbChromeSave" type="hidden" value="Save"/>
<input id="dbChromeCancel" type="hidden" value="Cancel"/>
<input id="dbChromeClose" type="hidden" value="Close"/>
<input id="dbDraghere" type="hidden" value="Drag pages here"/>
<input id="dbEdit" type="hidden" value="Edit"/>
<input id="dbDelete" type="hidden" value="Delete Book"/>
<input id="dbNoResults" type="hidden" value="Sorry, no results were found for"/>
<input id="dbSearchSuggestions" type="hidden" value="Search Suggestions:"/>
<input id="dbSuggestionOne" type="hidden" value="Check your spelling."/>
<input id="dbSuggestionTwo" type="hidden" value="Try different, more general, or fewer keywords."/>
<input id="dbNoMybooksResults" type="hidden" value="You do not have any books."/>
</fieldset>






<!-- CTSSOL-29742: Add Page To Book -->


<div id="page">
<div id="full-height-container">


<div class="ia-splitter">

<!-- \#header -->
<main class="aui-page-panel" id="main" role="main">
<!-- \#main-header -->
<div id="sidebar-container">
</div><!-- \#sidebar-container -->


<div class="page view" id="content">
<div id="action-messages">
</div>






<div class="wiki-content" id="main-content">
<div class="wiki-content">
<p>The DATETIMEZONEFORMAT( ) function adjusts the datetime to the time zone indicated by timezone_to_index and returns a formatted character string.</p><h2 id="DATETIMEZONEFORMATUsingDiscernExplorer-Syntax">Syntax</h2><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>DATETIMEZONEFORMAT(datetime, timezone_to_index, format_mask [,timezone_from_index,len]])</pre>
</div></div><h2 id="DATETIMEZONEFORMATUsingDiscernExplorer-Metasymbols">Metasymbols</h2><p><em>datetime</em><br>A datetime value.</br></p><p><em>timezone_to_index</em><br/>An integer representing the time zone to which to adjust the datetime value. If timezone_index is <strong>0</strong>, then the application time zone is returned.</p><p><em>timezone_from_index </em><br/>An integer representing the time zone from which to adjust the datetime value. Allows for use of DATETIMEZONEFORMAT() in non-UTC domains. Often, the CURTIMEZONEDEF variable is used. CURTIMEZONEDEF returns the UTC time zone in UTC domains or the CURTIMEZONEAPP in non-UTC domains.</p><div class="confluence-information-macro confluence-information-macro-information conf-macro output-block" data-hasbody="true" data-macro-name="info"><p class="title conf-macro-render">Note</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Oracle</span> has adopted a <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution" style="font-style: normal;">Windows</span> standard that has defined time zone names and their associated index numbers</p></div></div><p><em>format_mask</em><br/>Template defining how the adjusted datetime value is formatted.</p><p>Mask characters are case sensitive (use lowercase except for month, 24-hour, zone).<span class="conf-macro output-inline" data-hasbody="true" data-macro-name="table-plus"><div class="table-wrap"><table class="wrapped confluenceTable" id="TBL1750526018406"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh"><p>Mask</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><th class="confluenceTh"><p>d</p></th><td class="confluenceTd"><p>The day of month as digits, with no leading zero for single-digit days.</p></td></tr><tr><th class="confluenceTh"><p>dd</p></th><td class="confluenceTd"><p>The day of month as digits, with a leading zero for single-digit days.</p></td></tr><tr><th class="confluenceTh"><p>ddd</p></th><td class="confluenceTd"><p>The day of week as a three-letter abbreviation.</p></td></tr><tr><th class="confluenceTh"><p>dddd</p></th><td class="confluenceTd"><p>The day of week as its full name.</p></td></tr><tr><th class="confluenceTh"><p>M</p></th><td class="confluenceTd"><p>The month as digits, with no leading zero for single-digit months.</p></td></tr><tr><th class="confluenceTh"><p>MM</p></th><td class="confluenceTd"><p>The month as digits, with a leading zero for single-digit months.</p></td></tr><tr><th class="confluenceTh"><p>MMM</p></th><td class="confluenceTd"><p>The month as a three-letter abbreviation.</p></td></tr><tr><th class="confluenceTh"><p>MMMM</p></th><td class="confluenceTd"><p>The month as its full name. A mask of 4 to 12 <strong>M</strong> characters is treated as the full month name.</p></td></tr><tr><th class="confluenceTh"><p>y</p></th><td class="confluenceTd"><p>The year as the last two digits, but with no leading zero for years less than 10.</p></td></tr><tr><th class="confluenceTh"><p>yy</p></th><td class="confluenceTd"><p>The year as the last two digits, but with leading zero for years less than 10.</p></td></tr><tr><th class="confluenceTh"><p>yyyy</p></th><td class="confluenceTd"><p>The year represented by full four digits.</p></td></tr><tr><th class="confluenceTh"><p>gg</p></th><td class="confluenceTd"><p>The period or era string.</p></td></tr><tr><th class="confluenceTh"><p>h</p></th><td class="confluenceTd"><p>The hours, with no leading zero for single-digit hours (12-hour clock).</p></td></tr><tr><th class="confluenceTh"><p>hh</p></th><td class="confluenceTd"><p>The hours, with a leading zero for single-digit hours (12-hour clock).</p></td></tr><tr><th class="confluenceTh"><p>H</p></th><td class="confluenceTd"><p>The hours, with no leading zero for single-digit hours (24-hour clock).</p></td></tr><tr><th class="confluenceTh"><p>HH</p></th><td class="confluenceTd"><p>The hours, with a leading zero for single-digit hours (24-hour clock).</p></td></tr><tr><th class="confluenceTh"><p>m</p></th><td class="confluenceTd"><p>The minutes, with no leading zero for single-digit minutes.</p></td></tr><tr><th class="confluenceTh"><p>mm</p></th><td class="confluenceTd"><p>The minutes, with a leading zero for single-digit minutes.</p></td></tr><tr><th class="confluenceTh"><p>s</p></th><td class="confluenceTd"><p>The seconds, with no leading zero for single-digit seconds.</p></td></tr><tr><th class="confluenceTh"><p>ss</p></th><td class="confluenceTd"><p>The seconds, with a leading zero for single-digit seconds.</p></td></tr><tr><th class="confluenceTh"><p>c</p></th><td class="confluenceTd"><p>The centiseconds, with no leading zero for single-digit seconds.</p></td></tr><tr><th class="confluenceTh"><p>cc</p></th><td class="confluenceTd"><p>The centiseconds, with a leading zero for single-digit seconds.</p></td></tr><tr><th class="confluenceTh"><p>i</p></th><td class="confluenceTd"><p>The milliseconds, with no leading zero for single-digit seconds.</p></td></tr><tr><th class="confluenceTh"><p>ii</p></th><td class="confluenceTd"><p>The milliseconds, with a leading zero for single-digit seconds.</p></td></tr><tr><th class="confluenceTh"><p>t</p></th><td class="confluenceTd"><p>A one-character time marker string, such as A or P.</p></td></tr><tr><th class="confluenceTh" colspan="1">T</th><td class="confluenceTd" colspan="1"><div class="content-wrapper"><p>Beginning in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.17.0 and 9.05.0 displays a literal T. Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.17.0 and 9.05.0 displays a one-character time marker string, such as A or P.</p></div></td></tr><tr><th class="confluenceTh"><p>tt</p></th><td class="confluenceTd"><p>A multiple-character time marker string, such as AM or PM. Must be preceded by a space or other format character and the <strong>hh mm</strong> options.</p></td></tr><tr><th class="confluenceTh"><p>ZZZZZZ</p></th><td class="confluenceTd"><p>The full zone name.</p></td></tr><tr><th class="confluenceTh"><p>ZZZ</p></th><td class="confluenceTd"><p>The short zone name.</p></td></tr></tbody></table></div>

</span>The format_mask can be <strong>@<em>format_name</em>,</strong> with the format_name in uppercase, as long as it is set up correctly in the CCLFMT record structure. The CCLSTARTUP_LOCALE program defines the CCLFMT record structure. The CALL ECHORECORD(CCLFMT) command can be used to display the previously defined formats.</p><p>Beginning in versions 8.14.2 and 9.02.4, <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> performs implicit context checking attempting to eliminate case sensitivity in the format_mask. However, use the case shown above for the mask characters and not assume that an implicit check corrects the case. Beginning in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.14.4 and 9.02.4, a lowercase month character converts to uppercase M if minutes are used before month in the format mask.  <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.14.2, 8.14.3, 9.02.2, and 9.02.3 do not perform that conversion. <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.14.4 and 9.02.4 began using the locale month names set by the CCLSTARTUP_LOCALE program instead of the month abbreviation and full name returned from the SRV Calendar API. <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.15.0 and 9.03.0 resolved an issue with the month not displaying correctly when the month mask contained 4 M to 8 M characters.</p><p><em>len</em></p><p>Introduced in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.14.2 and 9.02.2. If len is omitted, the default of 128 characters is used for the length of the returned string.  If len is <strong>0,</strong> the length of the returned string is calculated from the format_mask; otherwise, the length specified by len is used for the length of the returned string.</p><h2 id="DATETIMEZONEFORMATUsingDiscernExplorer-Examples">Examples</h2><p>In the example below, the birth_dt_tm and birth_local_tz expressions display the p.birth_dt_tm value formatted to the local time zone. The birth_birth_tz expression is formatted to the time zone that is stored in the p.birth_tz field. The birth_fmt_tz_prec expression formats the birth_dt_tm using the DATEBIRTHFORMAT() function, which accounts for the birth time zone and the precision of the birth_dt_tm value. DATEBIRTHFORMAT() is the recommended option for formatting the birth_dt_tm.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>SELECT INTO $OUTDEV
	 P.BIRTH_DT_TM "@SHORTDATETIME"
	, BIRTH_LOCAL_TZ = FORMAT(P.BIRTH_DT_TM,"MM/DD/YYYY  HH:MM:SS ZZZ")
	, BIRTH_BIRTH_TZ = DATETIMEZONEFORMAT(P.BIRTH_DT_TM,P.BIRTH_TZ, "MM/dd/yyyy  hh:mm:ss ZZZ",CURTIMEZONEDEF)
    , BIRTH_FMT_TZ_PREC = DATEBIRTHFORMAT(P.BIRTH_DT_TM,P.BIRTH_TZ,P.BIRTH_PREC_FLAG,"dd-MMM-yyyy HH:mm:ss ZZZ")
FROM PERSON P
WHERE P.UPDT_DT_TM BETWEEN CNVTLOOKBEHIND("1,W") AND CNVTDATETIME(CURDATE,CURTIME3)
WITH FORMAT, SEPARATOR = " "
</pre>
</div></div><p>When the example below is executed in an environment set to <strong>CST</strong>(Central standard time) with UTC enabled, the Call Echo command displays <strong>05-MAY-2002 10:00:00.00</strong>, because 43 is the time zone index for Pacific Standard Time.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>SET P_DT_TM = DATETIMEZONEFORMAT(CNVTDATETIME("05-MAY-2002 12:00"),43,"dd-MMM-yyyy hh:mm:ss.cc") GO
CALL ECHO(P_DT_TM) GO
</pre>
</div></div><p>In the example below, APP_TIME displays the update date, time, and time zone converted to the time zone of the application. SYS_TIME displays the update date, time, and time zone converted to the time zone for the system.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>SELECT INTO $1
     APP_TIME = DATETIMEZONEFORMAT( P.UPDT_DT_TM ,CURTIMEZONEAPP,"MM/dd/yy hh:mm:ss ZZZ"),
     SYS_TIME = DATETIMEZONEFORMAT( P.UPDT_DT_TM,CURTIMEZONESYS,"MM/dd/yy hh:mm:ss ZZZ")
FROM PERSON P
WITH MAXREC = 100
</pre>
</div></div><p>When the following example is executed in an environment with UTC enabled, the Call Echo command displays the current date and time formatted from UTC to PST (Pacific Standard Time):</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>call echo(datetimezoneformat(cnvtdatetime(curdate,curtime3),DATETIMEZONEBYNAME("PST"),"dd-MMM-yyyy hh:mm ZZZ",curtimezonedef)) go
</pre>
</div></div><p>The following example uses the CURTIMEZONEDEF variable as the optional timezone_from_index to allow the DATETIMEZONEFORMAT() to return the expected value in both UTC and non-UTC domains:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>call echo( datetimezoneformat(cnvtdatetime("07-Apr-2011 13:30:45"),datetimezonebyname("US/Arizona")
                       ,"dd-MMM-yyyy HH:mm:ss ZZZ",curtimezonedef) ) go
</pre>
</div></div><p>The example below sets the following:</p><ul><li>def_var to a 128-character string.</li><li>30_var to a 30-character string.</li><li>0_var1 to a 20-character string because there are 20 characters in dd-MMM-yyyy HH:mm:ss.</li><li>0_var2 to a 51-character string. There are twenty-six characters in dd-MMM-yyyy HH:mm:ss ZZZZZ, but ZZZZZ is treated as an abbreviation for the 30-character long timezone name.</li></ul><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>set def_var = datetimezoneformat(cnvtdatetime("9-May-2012 13:30:45"),datetimezonebyname("UTC")
                       ,"dd-MMM-yyyy HH:mm:ss ZZZZZ",curtimezonedef) 

set 30_var = datetimezoneformat(cnvtdatetime("9-May-2012 13:30:45"),datetimezonebyname("UTC")
                       ,"dd-MMM-yyyy HH:mm:ss ZZZZZ",curtimezonedef,30) 

set 0_var1 = datetimezoneformat(cnvtdatetime("9-May-2012 13:30:45"),datetimezonebyname("UTC")
                       ,"dd-MMM-yyyy HH:mm:ss",curtimezonedef,0) 

set 0_var2 = datetimezoneformat(cnvtdatetime("9-May-2012 13:30:45"),datetimezonebyname("UTC")
                       ,"dd-MMM-yyyy HH:mm:ss ZZZZZ",curtimezonedef,0) </pre>
</div></div>
</div>
</div>


<fieldset class="parameters hidden">
<input id="contextPageId" type="hidden" value="23338630">
<input id="contextPageVersion" type="hidden" value="34">
</input></input></fieldset>
</div>

</main><!-- \#main -->
</div>
</div>
</div><!-- \#full-height-container -->
<!-- \#page -->
<span id="confluence-server-performance" style="display:none;">{"serverDuration": 1380, "requestCorrelationId": "afc92155ef1ed28e"}</span>
</body>
</html>
