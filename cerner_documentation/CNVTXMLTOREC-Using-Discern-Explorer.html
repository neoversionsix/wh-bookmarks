
<!DOCTYPE html>

<html lang="en-US">
<head>
<!-- Start SiteCatalyst code --><!-- End SiteCatalyst code -->


<title>CNVTXMLTOREC(  ) Using Discern Explorer - Discern Help Pages - Cerner Wiki</title>






























<style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>



</head>
<body class="theme-default aui-layout aui-theme-default" id="com-atlassian-confluence">
<div id="stp-licenseStatus-banner"></div>
<div id="workflow-page-status" style="display: none;"><fieldset class="hidden parameters">
<input id="stateName" type="hidden" value="Published"/><input id="hoverDescription" type="hidden" value="Published"/><input id="finalState" type="hidden" value="true"/><input id="hasFinalState" type="hidden" value="true"/><input id="publishedView" type="hidden" value="true"/><input id="taskable" type="hidden" value="false"/><input id="activeTasks" type="hidden" value="0"/><input id="pageAssignable" type="hidden" value="false"/><input id="workflowAdmin" type="hidden" value="false"/><input id="anonymous" type="hidden" value="true"/><input id="alternateViewStateName" type="hidden" value="View"/><input id="alternateViewUrl" type="hidden" value="/display/1101discernHP/CNVTXMLTOREC%28++%29+Using+Discern+Explorer?draft=true"/><input id="activityVisible" type="hidden" value="true"/><input id="approvalMinQuery" type="hidden" value="5"/><input id="showDocumentActivity" type="hidden" value="true"/><input id="alternateViewTitle" type="hidden" value="View latest version of page"/></fieldset></div>
<div style="display: none;"></div>









































<!-- CTSSOL-29742: Add Page To Book -->


<div id="page">
<div id="full-height-container">


<div class="ia-splitter">

<!-- \#header -->
<main class="aui-page-panel" id="main" role="main">
<!-- \#main-header -->
<div id="sidebar-container">
</div><!-- \#sidebar-container -->


<div class="page view" id="content">
<div id="action-messages">
</div>






<div class="wiki-content" id="main-content">
<div class="wiki-content">
<p>The CNVTXMLTOREC( ) function converts an XML string to a <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure. It returns <strong>1</strong> for success or <strong>0</strong> for error. By default if the record structure defined in the XML string does not exist, it is created and populated. If the record structure already exists it is populated. When called in a Reportwriter Clause, CNVTXMLTOREC() populates an existing record structure but does not create the record structure if it does not already exist.</p><p>For information about writing the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure as an XML stream to the displayer, default log or listing file, or to a user-defined file, see the CALL ECHOXML command.</p><p>See the CNVTRECTOXML() function for information about converting a <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure to an XML string.</p><p><span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.11.3 through 8.12.1 require using the ALTERLIST() function to allocate memory for a list with a length of 0 in the XML string or the SET MODIFY RECORDALTER command before assigning a value to an item in the list. This requirement is removed in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.12.2.</p><h2 id="CNVTXMLTOREC()UsingDiscernExplorer-Syntax">Syntax</h2><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>CNVTXMLTOREC(expression,[mode,[casemode[,datemode[,flexmode]]]])</pre>
</div></div><h2 id="CNVTXMLTOREC()UsingDiscernExplorer-Metasymbols">Metasymbols</h2><p><code><em>expression</em></code></p><p>The name of an expression that contains the XML string.</p><p><code><em>mode</em></code><br>Modes 0 to 5 only make pass through first occur of lists to generate the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition.<br/>Modes 6 to 11 make full pass through all occurs to generate the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition.</br></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh"><p>Mode</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>0,6</p></td><td class="confluenceTd"><div class="content-wrapper"><p>Create the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition with nopersist and populate it from the XML string. (0 is the default).</p></div></td></tr><tr><td class="confluenceTd"><p>1,7</p></td><td class="confluenceTd"><div class="content-wrapper"><p>Create the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition with nopersist but do not populate it from the XML string, initialize all lists to 0 occurs.</p></div></td></tr><tr><td class="confluenceTd"><p>2,8</p></td><td class="confluenceTd"><div class="content-wrapper"><p>Create the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition with persist and populate it from the XML string.</p></div></td></tr><tr><td class="confluenceTd"><p>3,9</p></td><td class="confluenceTd"><div class="content-wrapper"><p>Create the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition with persist but don't populate it from the XML string, initialize all lists to 0 occurs.</p></div></td></tr><tr><td class="confluenceTd"><p>4,10</p></td><td class="confluenceTd"><div class="content-wrapper"><p>Create the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition with <code>persistscript</code> and populate it from the XML string.</p></div></td></tr><tr><td class="confluenceTd"><p>5,11</p></td><td class="confluenceTd"><div class="content-wrapper"><p>Create the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition with nopersistscript but don't populate it from the XML string, initialize all lists to 0 occurs.</p></div></td></tr></tbody></table></div><p>The <code><em>mode</em></code> options 0 and 1 were introduced in version 8.6.4 of <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span>. Options 2 through 11 were introduced in version 8.8.3 of <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span>.</p><p><code><em>casemode</em></code></p><p>Introduced in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.0. By default, the record name, list names, and field names in the XML string are converted to uppercase in the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure definition. <code>Casemode</code> allows list names and field names to keep their case from the XML string. Before <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.16.0 and 9.04.0, if the record name is not uppercase in the XML string, and <code>casemode</code> 1 is used, the <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure is not created because record names must be uppercase. Beginning in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.16.0 and 9.04.0 the record name is implicitly converted to uppercase when <code>casemode</code> 1 is used.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh"><p>Casemode</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>0</p></td><td class="confluenceTd"><p>Convert list names and field names to uppercase (default).</p></td></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>List names and field names retain the case from the XML string.</p></td></tr></tbody></table></div><p><code><em>datemode</em></code><br/>Introduced in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> version 8.10.3 to implicitly recognize the International Organization for Standardization (ISO) date string if Date() is omitted. In Coordinated Universal Time (UTC)-enabled environments, the date is converted from UTC to local time. In non-UTC-enabled environments, the date is used as is. <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.13.0 and 9.01.0 added <code>datemodes</code> 2 and 3.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Datemode</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">Do not cast an ISO date string to DQ8 (default)</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">Cast an ISO date string to DQ8</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">Do not cast an ISO date string to DQ8, and convert UTC to local regardless of UTC</td></tr><tr><td class="confluenceTd" colspan="1">3</td><td class="confluenceTd" colspan="1">Cast an ISO date string to DQ8, and convert UTC to local regardless of UTC</td></tr></tbody></table></div><p><code>flexmode</code></p><p>Introduced in <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> versions 8.14.0 and 9.02.0<em>.</em></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Option</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">The default mode.</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">Retain binary values, and do not convert to backslash (\) for JSON.</td></tr></tbody></table></div><p><br/></p><h2 id="CNVTXMLTOREC()UsingDiscernExplorer-Examples">Examples</h2><p>Assuming XML_STR was equal to the following:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;CCLREC name="PERSON_REC"&gt;&lt;ID type="DOUBLE" value="12345.000000"/&gt;
&lt;FIRSTNAME type="STRING" length="4"&gt;&lt;![CDATA[John]]&gt;&lt;/FIRSTNAME&gt;
&lt;LASTNAME type="STRING" length="5"&gt;&lt;![CDATA[Smith]]&gt;&lt;/LASTNAME&gt;
&lt;ADDRESS type="LIST" memberCount="2"&gt;&lt;ITEM&gt;
&lt;STREET type="STRING" length="9"&gt;&lt;![CDATA[123 Grant]]&gt;&lt;/STREET&gt;
&lt;CITY type="STRING" length="11"&gt;&lt;![CDATA[Kansas City]]&gt;	&lt;/CITY&gt;
&lt;STATE type="STRING" length="2"&gt;&lt;![CDATA[MO]]&gt;&lt;/STATE&gt;
&lt;ZIP type="INT" value="64130"/&gt;
&lt;ATYPE type="STRING" length="4"&gt;&lt;![CDATA[HOME]]&gt;&lt;/ATYPE&gt;&lt;/ITEM&gt;
&lt;ITEM&gt;
&lt;STREET type="STRING" length="11"&gt;&lt;![CDATA[456 Central]]&gt;&lt;/STREET&gt;
&lt;CITY type="STRING" length="9"&gt;&lt;![CDATA[Grandview]]&gt;&lt;/CITY&gt;
&lt;STATE type="STRING" length="2"&gt;&lt;![CDATA[MO]]&gt;&lt;/STATE&gt;
&lt;ZIP type="INT" value="64154"/&gt;
&lt;ATYPE type="STRING" length="8"&gt;&lt;![CDATA[BUSINESS]]&gt;&lt;/ATYPE&gt;&lt;/ITEM&gt;&lt;/ADDRESS&gt;
&lt;PHONE type="LIST" memberCount="3"&gt;&lt;ITEM&gt;
&lt;NUMBER type="STRING" length="10"&gt;&lt;![CDATA[8165551234]]&gt;&lt;/NUMBER&gt;
&lt;PTYPE type="STRING" length="4"&gt;&lt;![CDATA[HOME]]&gt;&lt;/PTYPE&gt;&lt;/ITEM&gt;
&lt;ITEM&gt;&lt;NUMBER type="STRING" length="10"&gt;&lt;![CDATA[8165551334]]&gt;&lt;/NUMBER&gt;
&lt;PTYPE type="STRING" length="8"&gt;&lt;![CDATA[BUSINESS]]&gt;&lt;/PTYPE&gt;&lt;/ITEM&gt;
&lt;ITEM&gt;&lt;NUMBER type="STRING" length="10"&gt;&lt;![CDATA[8165551434]]&gt;&lt;/NUMBER&gt;
&lt;PTYPE type="STRING" length="6"&gt;&lt;![CDATA[MOBILE]]&gt;&lt;/PTYPE&gt;
&lt;/ITEM&gt;&lt;/PHONE&gt;&lt;/CCLREC&gt;
</pre>
</div></div><p>The following example creates and populates a <span class="conf-solution-name conf-macro output-inline" data-hasbody="false" data-macro-name="solution">Discern Explorer</span> record structure named PERSON_REC.</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>SET JREC = CNVTXMLTOREC(XML_STR)</pre>
</div></div><p>The PERSON_REC record structure would have the following definition:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>RECORD PERSON_REC (
  1 ID =  F8
  1 FIRSTNAME =  VC
  1 LASTNAME =  VC
  1 ADDRESS[*]
   	2 STREET =  VC
   	2 CITY =  VC
   	2 STATE =  VC
   	2 ZIP =  I4
   	2 ATYPE =  VC
  1 PHONE[*]
   	2 NUMBER =  VC
   	2 PTYPE =  VC
</pre>
</div></div><p>Executing CALL ECHORECORD(PERSON_REC) would then create the following:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&gt;&gt;&gt;Begin EchoRecord PERSON_REC   ;PERSON_REC
 1 ID=F8   {12345.0000000000                        }
 1 FIRSTNAME=VC4   {John}
 1 LASTNAME=VC5   {Smith}
 1 ADDRESS[1,2*]
  	2 STREET=VC9   {123 Grant}
  	2 CITY=VC11   {Kansas City}
  	2 STATE=VC2   {MO}
  	2 ZIP= I4   {64130}
  	2 ATYPE=VC4   {HOME}
 1 ADDRESS[2,2*]
	 2 STREET=VC11   {456 Central}
  	2 CITY=VC9   {Grandview}
  	2 STATE=VC2   {MO}
  	2 ZIP= I4   {64154}
  	2 ATYPE=VC8   {BUSINESS}
 1 PHONE[1,3*]
  	2 NUMBER=VC10   {8165551234}
  	2 PTYPE=VC4   {HOME}
 1 PHONE[2,3*]
  	2 NUMBER=VC10   {8165551334}
  	2 PTYPE=VC8   {BUSINESS}
 1 PHONE[3,3*]
  	2 NUMBER=VC10   {8165551434}
  	2 PTYPE=VC6   {MOBILE}
&gt;&gt;&gt;End EchoRecord PERSON_REC varchar=16, varlist=2, reclen=129, reclen2=273
</pre>
</div></div><p>The following example uses the continuation character "\" to create the XML string. It then uses CNVTXMLTOREC() to convert the XML string to a record structure:</p><div class="preformatted panel conf-macro output-block" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>DROP PROGRAM BGR_TEST_CNVTXMLTOREC GO
CREATE PROGRAM BGR_TEST_CNVTXMLTOREC

DECLARE XREC = I4
DECLARE XML_STR = VC
SET XML_STR = ^&lt;CCLREC name="PERSON_REC"&gt;\
	&lt;ID type="DOUBLE" value="12345.000000"/&gt;\
	&lt;FIRSTNAME type="STRING" length="4"&gt;&lt;![CDATA[John]]&gt;&lt;/FIRSTNAME&gt;\
	&lt;LASTNAME type="STRING" length="5"&gt;&lt;![CDATA[Smith]]&gt;&lt;/LASTNAME&gt;\
	&lt;ADDRESS type="LIST" memberCount="2"&gt;&lt;ITEM&gt;\
	&lt;STREET type="STRING" length="9"&gt;&lt;![CDATA[123 Grant]]&gt;&lt;/STREET&gt;\
	&lt;CITY type="STRING" length="11"&gt;&lt;![CDATA[Kansas City]]&gt;	&lt;/CITY&gt;\
	&lt;STATE type="STRING" length="2"&gt;&lt;![CDATA[MO]]&gt;&lt;/STATE&gt;\
	&lt;ZIP type="INT" value="64130"/&gt;\
	&lt;ATYPE type="STRING" length="4"&gt;&lt;![CDATA[HOME]]&gt;&lt;/ATYPE&gt;&lt;/ITEM&gt;\
	&lt;ITEM&gt;\
	&lt;STREET type="STRING" length="11"&gt;&lt;![CDATA[456 Central]]&gt;&lt;/STREET&gt;\
	&lt;CITY type="STRING" length="9"&gt;&lt;![CDATA[Grandview]]&gt;&lt;/CITY&gt;\
	&lt;STATE type="STRING" length="2"&gt;&lt;![CDATA[MO]]&gt;&lt;/STATE&gt;\
	&lt;ZIP type="INT" value="64154"/&gt;\
	&lt;ATYPE type="STRING" length="8"&gt; \
	&lt;![CDATA[BUSINESS]]&gt;&lt;/ATYPE&gt;&lt;/ITEM&gt;&lt;/ADDRESS&gt;\
	&lt;PHONE type="LIST" memberCount="3"&gt;&lt;ITEM&gt;\
	&lt;NUMBER type="STRING" length="10"&gt;&lt;![CDATA[8165551234]]&gt;&lt;/NUMBER&gt;\
	&lt;PTYPE type="STRING" length="4"&gt;&lt;![CDATA[HOME]]&gt;&lt;/PTYPE&gt;&lt;/ITEM&gt;\
	&lt;ITEM&gt;&lt;NUMBER type="STRING" length="10"&gt;&lt;![CDATA[8165551334]]&gt;&lt;/NUMBER&gt;\
	&lt;PTYPE type="STRING" length="8"&gt;&lt;![CDATA[BUSINESS]]&gt;&lt;/PTYPE&gt;&lt;/ITEM&gt;\
	&lt;ITEM&gt;&lt;NUMBER type="STRING" length="10"&gt;&lt;![CDATA[8165551434]]&gt;&lt;/NUMBER&gt;\
	&lt;PTYPE type="STRING" length="6"&gt; \
	&lt;![CDATA[MOBILE]]&gt;&lt;/PTYPE&gt;&lt;/ITEM&gt;&lt;/PHONE&gt;&lt;/CCLREC&gt;^

SET XREC = CNVTXMLTOREC(XML_STR)
CALL ECHORECORD(PERSON_REC)

END
GO
</pre>
</div></div>
</div>
</div>



</div>

</main><!-- \#main -->
</div>
</div>
</div><!-- \#full-height-container -->
<!-- \#page -->
<span id="confluence-server-performance" style="display:none;">{"serverDuration": 1216, "requestCorrelationId": "349467d57b96226f"}</span>
</body>
</html>
